import{A as k,H as B,Ia as Q,J as L,O as g,Ob as ee,P as W,R as z,T as R,U as f,Y as X,_ as Z,a as y,b as J,h as x,ja as M,l,n as v,p as c,t as V,u as K,v as S,x as h,y as G,zb as Y}from"./chunk-VQBMQZRL.js";var j=class{},ie=(()=>{class t{handle(e){return e.key}static \u0275fac=function(n){return new(n||t)};static \u0275prov=g({token:t,factory:t.\u0275fac})}return t})(),F=class{},oe=(()=>{class t extends F{compile(e,n){return e}compileTranslations(e,n){return e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=M(t)))(r||t)}})();static \u0275prov=g({token:t,factory:t.\u0275fac})}return t})(),_=class{},le=(()=>{class t extends _{getTranslation(e){return l({})}static \u0275fac=(()=>{let e;return function(r){return(e||(e=M(t)))(r||t)}})();static \u0275prov=g({token:t,factory:t.\u0275fac})}return t})();function O(t,s){if(t===s)return!0;if(t===null||s===null)return!1;if(t!==t&&s!==s)return!0;let e=typeof t,n=typeof s,r;if(e==n&&e=="object")if(Array.isArray(t)){if(!Array.isArray(s))return!1;if((r=t.length)==s.length){for(let a=0;a<r;a++)if(!O(t[a],s[a]))return!1;return!0}}else{if(Array.isArray(s))return!1;if(p(t)&&p(s)){let a=Object.create(null);for(let i in t){if(!O(t[i],s[i]))return!1;a[i]=!0}for(let i in s)if(!(i in a)&&typeof s[i]<"u")return!1;return!0}}return!1}function C(t){return typeof t<"u"&&t!==null}function te(t){return t!==void 0}function p(t){return P(t)&&!T(t)&&t!==null}function P(t){return typeof t=="object"&&t!==null}function T(t){return Array.isArray(t)}function A(t){return typeof t=="string"}function ue(t){return typeof t=="function"}function E(t){if(T(t))return t.map(s=>E(s));if(p(t)){let s={};return Object.keys(t).forEach(e=>{s[e]=E(t[e])}),s}else return t}function U(t,s){if(!P(t))return E(s);let e=E(t);return P(e)&&P(s)&&Object.keys(s).forEach(n=>{p(s[n])?n in t?e[n]=U(t[n],s[n]):Object.assign(e,{[n]:s[n]}):Object.assign(e,{[n]:s[n]})}),e}function ae(t,s){let e=s.split(".");s="";do{s+=e.shift();let n=!e.length;if(C(t)){if(p(t)&&te(t[s])&&(p(t[s])||T(t[s])||n)){t=t[s],s="";continue}if(T(t)){let r=parseInt(s,10);if(te(t[r])&&(p(t[r])||T(t[r])||n)){t=t[r],s="";continue}}}if(n){t=void 0;continue}s+="."}while(e.length);return t}function ce(t,s,e){return U(t,ge(s,e))}function ge(t,s){return t.split(".").reduceRight((e,n)=>({[n]:e}),s)}var w=class{},he=(()=>{class t extends w{templateMatcher=/{{\s?([^{}\s]*)\s?}}/g;interpolate(e,n){if(A(e))return this.interpolateString(e,n);if(ue(e))return this.interpolateFunction(e,n)}interpolateFunction(e,n){return e(n)}interpolateString(e,n){return n?e.replace(this.templateMatcher,(r,a)=>{let i=this.getInterpolationReplacement(n,a);return i!==void 0?i:r}):e}getInterpolationReplacement(e,n){return this.formatValue(ae(e,n))}formatValue(e){if(A(e))return e;if(typeof e=="number"||typeof e=="boolean")return e.toString();if(e===null)return"null";if(T(e))return e.join(", ");if(P(e))return typeof e.toString=="function"&&e.toString!==Object.prototype.toString?e.toString():JSON.stringify(e)}static \u0275fac=(()=>{let e;return function(r){return(e||(e=M(t)))(r||t)}})();static \u0275prov=g({token:t,factory:t.\u0275fac})}return t})(),$=(()=>{class t{_onTranslationChange=new x;_onLangChange=new x;_onFallbackLangChange=new x;fallbackLang=null;currentLang;translations={};languages=[];getTranslations(e){return this.translations[e]}setTranslations(e,n,r){this.translations[e]=r&&this.hasTranslationFor(e)?U(this.translations[e],n):n,this.addLanguages([e]),this._onTranslationChange.next({lang:e,translations:this.getTranslations(e)})}getLanguages(){return this.languages}getCurrentLang(){return this.currentLang}getFallbackLang(){return this.fallbackLang}setFallbackLang(e,n=!0){this.fallbackLang=e,n&&this._onFallbackLangChange.next({lang:e,translations:this.translations[e]})}setCurrentLang(e,n=!0){this.currentLang=e,n&&this._onLangChange.next({lang:e,translations:this.translations[e]})}get onTranslationChange(){return this._onTranslationChange.asObservable()}get onLangChange(){return this._onLangChange.asObservable()}get onFallbackLangChange(){return this._onFallbackLangChange.asObservable()}addLanguages(e){this.languages=Array.from(new Set([...this.languages,...e]))}hasTranslationFor(e){return typeof this.translations[e]<"u"}deleteTranslations(e){delete this.translations[e]}getTranslation(e){let n=this.getValue(this.currentLang,e);return n===void 0&&this.fallbackLang!=null&&this.fallbackLang!==this.currentLang&&(n=this.getValue(this.fallbackLang,e)),n}getValue(e,n){return ae(this.getTranslations(e),n)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=g({token:t,factory:t.\u0275fac})}return t})(),H=new z("TRANSLATE_CONFIG"),I=t=>v(t)?t:l(t);var D=(()=>{class t{loadingTranslations;pending=!1;_translationRequests={};lastUseLanguage=null;currentLoader=f(_);compiler=f(F);parser=f(w);missingTranslationHandler=f(j);store=f($);extend=!1;get onTranslationChange(){return this.store.onTranslationChange}get onLangChange(){return this.store.onLangChange}get onFallbackLangChange(){return this.store.onFallbackLangChange}get onDefaultLangChange(){return this.store.onFallbackLangChange}constructor(){let e=y({extend:!1,fallbackLang:null},f(H,{optional:!0}));e.lang&&this.use(e.lang),e.fallbackLang&&this.setFallbackLang(e.fallbackLang),e.extend&&(this.extend=!0)}setFallbackLang(e){this.getFallbackLang()||this.store.setFallbackLang(e,!1);let n=this.loadOrExtendLanguage(e);return v(n)?(n.pipe(k(1)).subscribe({next:()=>{this.store.setFallbackLang(e)},error:()=>{}}),n):(this.store.setFallbackLang(e),l(this.store.getTranslations(e)))}use(e){this.lastUseLanguage=e,this.getCurrentLang()||this.store.setCurrentLang(e,!1);let n=this.loadOrExtendLanguage(e);return v(n)?(n.pipe(k(1)).subscribe({next:()=>{this.changeLang(e)},error:()=>{}}),n):(this.changeLang(e),l(this.store.getTranslations(e)))}loadOrExtendLanguage(e){if(!this.store.hasTranslationFor(e)||this.extend)return this._translationRequests[e]=this._translationRequests[e]||this.loadAndCompileTranslations(e),this._translationRequests[e]}changeLang(e){e===this.lastUseLanguage&&this.store.setCurrentLang(e)}getCurrentLang(){return this.store.getCurrentLang()}loadAndCompileTranslations(e){this.pending=!0;let n=this.currentLoader.getTranslation(e).pipe(B(1),k(1));return this.loadingTranslations=n.pipe(c(r=>this.compiler.compileTranslations(r,e)),B(1),k(1)),this.loadingTranslations.subscribe({next:r=>{this.store.setTranslations(e,r,this.extend),this.pending=!1},error:r=>{this.pending=!1}}),n}setTranslation(e,n,r=!1){let a=this.compiler.compileTranslations(n,e);this.store.setTranslations(e,a,r||this.extend)}getLangs(){return this.store.getLanguages()}addLangs(e){this.store.addLanguages(e)}getParsedResultForKey(e,n){let r=this.getTextToInterpolate(e);if(C(r))return this.runInterpolation(r,n);let a=this.missingTranslationHandler.handle(y({key:e,translateService:this},n!==void 0&&{interpolateParams:n}));return a!==void 0?a:e}getFallbackLang(){return this.store.getFallbackLang()}getTextToInterpolate(e){return this.store.getTranslation(e)}runInterpolation(e,n){if(C(e))return T(e)?this.runInterpolationOnArray(e,n):p(e)?this.runInterpolationOnDict(e,n):this.parser.interpolate(e,n)}runInterpolationOnArray(e,n){return e.map(r=>this.runInterpolation(r,n))}runInterpolationOnDict(e,n){let r={};for(let a in e){let i=this.runInterpolation(e[a],n);i!==void 0&&(r[a]=i)}return r}getParsedResult(e,n){return e instanceof Array?this.getParsedResultForArray(e,n):this.getParsedResultForKey(e,n)}getParsedResultForArray(e,n){let r={},a=!1;for(let u of e)r[u]=this.getParsedResultForKey(u,n),a=a||v(r[u]);if(!a)return r;let i=e.map(u=>I(r[u]));return S(i).pipe(c(u=>{let d={};return u.forEach((m,b)=>{d[e[b]]=m}),d}))}get(e,n){if(!C(e)||!e.length)throw new Error('Parameter "key" is required and cannot be empty');return this.pending?this.loadingTranslations.pipe(G(()=>I(this.getParsedResult(e,n)))):I(this.getParsedResult(e,n))}getStreamOnTranslationChange(e,n){if(!C(e)||!e.length)throw new Error('Parameter "key" is required and cannot be empty');return V(K(()=>this.get(e,n)),this.onTranslationChange.pipe(L(()=>{let r=this.getParsedResult(e,n);return I(r)})))}stream(e,n){if(!C(e)||!e.length)throw new Error('Parameter "key" required');return V(K(()=>this.get(e,n)),this.onLangChange.pipe(L(()=>{let r=this.getParsedResult(e,n);return I(r)})))}instant(e,n){if(!C(e)||e.length===0)throw new Error('Parameter "key" is required and cannot be empty');let r=this.getParsedResult(e,n);return v(r)?Array.isArray(e)?e.reduce((a,i)=>(a[i]=i,a),{}):e:r}set(e,n,r=this.getCurrentLang()){this.store.setTranslations(r,ce(this.store.getTranslations(r),e,A(n)?this.compiler.compile(n,r):this.compiler.compileTranslations(n,r)),!1)}reloadLang(e){return this.resetLang(e),this.loadAndCompileTranslations(e)}resetLang(e){delete this._translationRequests[e],this.store.deleteTranslations(e)}static getBrowserLang(){if(typeof window>"u"||!window.navigator)return;let e=this.getBrowserCultureLang();return e?e.split(/[-_]/)[0]:void 0}static getBrowserCultureLang(){if(!(typeof window>"u"||typeof window.navigator>"u"))return window.navigator.languages?window.navigator.languages[0]:window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage}getBrowserLang(){return t.getBrowserLang()}getBrowserCultureLang(){return t.getBrowserCultureLang()}get defaultLang(){return this.getFallbackLang()}get currentLang(){return this.store.getCurrentLang()}get langs(){return this.store.getLanguages()}setDefaultLang(e){return this.setFallbackLang(e)}getDefaultLang(){return this.getFallbackLang()}static \u0275fac=function(n){return new(n||t)};static \u0275prov=g({token:t,factory:t.\u0275fac})}return t})();var Ie=(()=>{class t{translate=f(D);_ref=f(Y);value="";lastKey=null;lastParams=[];onTranslationChange;onLangChange;onFallbackLangChange;updateValue(e,n,r){let a=i=>{this.value=i!==void 0?i:e,this.lastKey=e,this._ref.markForCheck()};if(r){let i=this.translate.getParsedResult(e,n);v(i)?i.subscribe(a):a(i)}this.translate.get(e,n).subscribe(a)}transform(e,...n){if(!e||!e.length)return e;if(O(e,this.lastKey)&&O(n,this.lastParams))return this.value;let r;if(C(n[0])&&n.length)if(A(n[0])&&n[0].length){let a=n[0].replace(/(')?([a-zA-Z0-9_]+)(')?(\s)?:/g,'"$2":').replace(/:(\s)?(')(.*?)(')/g,':"$3"');try{r=JSON.parse(a)}catch(i){throw new SyntaxError(`Wrong parameter in TranslatePipe. Expected a valid Object, received: ${n[0]}`)}}else p(n[0])&&(r=n[0]);return this.lastKey=e,this.lastParams=n,this.updateValue(e,r),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(a=>{(this.lastKey&&a.lang===this.translate.getCurrentLang()||a.lang===this.translate.getFallbackLang())&&(this.lastKey=null,this.updateValue(e,r,a.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(a=>{this.lastKey&&(this.lastKey=null,this.updateValue(e,r,a.translations))})),this.onFallbackLangChange||(this.onFallbackLangChange=this.translate.onFallbackLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(e,r))})),this.value}_dispose(){typeof this.onTranslationChange<"u"&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),typeof this.onLangChange<"u"&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),typeof this.onFallbackLangChange<"u"&&(this.onFallbackLangChange.unsubscribe(),this.onFallbackLangChange=void 0)}ngOnDestroy(){this._dispose()}static \u0275fac=function(n){return new(n||t)};static \u0275pipe=Z({name:"translate",type:t,pure:!1,standalone:!0});static \u0275prov=g({token:t,factory:t.\u0275fac})}return t})();function fe(t){return{provide:_,useClass:t}}function de(t){return{provide:F,useClass:t}}function pe(t){return{provide:w,useClass:t}}function me(t){return{provide:j,useClass:t}}function ne(t={},s){let e=[];t.loader&&e.push(t.loader),t.compiler&&e.push(t.compiler),t.parser&&e.push(t.parser),t.missingTranslationHandler&&e.push(t.missingTranslationHandler),s&&e.push($),(t.useDefaultLang||t.defaultLanguage)&&(console.warn("The `useDefaultLang` and `defaultLanguage` options are deprecated. Please use `fallbackLang` instead."),t.useDefaultLang===!0&&t.defaultLanguage&&(t.fallbackLang=t.defaultLanguage));let n={fallbackLang:t.fallbackLang??null,lang:t.lang,extend:t.extend??!1};return e.push({provide:H,useValue:n}),e.push({provide:D,useClass:D,deps:[$,_,F,w,j,H]}),e}var Pe=(()=>{class t{static forRoot(e={}){return{ngModule:t,providers:[...ne(y({compiler:de(oe),parser:pe(he),loader:fe(le),missingTranslationHandler:me(ie)},e),!0)]}}static forChild(e={}){return{ngModule:t,providers:[...ne(e,e.isolate??!1)]}}static \u0275fac=function(n){return new(n||t)};static \u0275mod=X({type:t});static \u0275inj=W({})}return t})();var se=(()=>{class t{constructor(e){this.translate=e,this.currentLanguage=Q("es");let n=localStorage.getItem("language"),r=n==="es"||n==="en"?n:"es";this.setLanguage(r)}setLanguage(e){this.translate.use(e),this.currentLanguage.set(e),localStorage.setItem("language",e)}getCurrentLanguage(){return this.currentLanguage()}static{this.\u0275fac=function(n){return new(n||t)(R(D))}}static{this.\u0275prov=g({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Ke=(()=>{class t{constructor(e){this.http=e,this.apiUrl="http://localhost:8000/api",this.languageService=f(se)}withLang(e){let n=this.languageService.getCurrentLanguage(),r=e.includes("?")?"&":"?";return`${e}${r}lang=${n}`}getSuppliers(){return this.http.get("assets/catalog/__metadata__.json").pipe(h(()=>l({suppliers:{}})),c(e=>!e||!e.suppliers?[]:Object.entries(e.suppliers).map(([n,r])=>y({slug:n},r))))}getSupplierBySlug(e){return this.http.get("assets/catalog/__metadata__.json").pipe(h(()=>l({suppliers:{}})),L(n=>{if(!n||!n.suppliers)return l(null);let r=n.suppliers[e];return r?this.getProductsBySupplier(e).pipe(c(a=>J(y({slug:e},r),{products:a,products_count:a.length}))):l(null)}))}getCategories(){return this.http.get(this.withLang(`${this.apiUrl}/categories/`)).pipe(h(()=>l([])))}getCategoryBySlug(e){return this.http.get(this.withLang(`${this.apiUrl}/categories/${e}/`))}getProducts(e){return e?this.getProductsBySupplier(e):this.getSuppliers().pipe(L(n=>{if(n.length===0)return l([]);let r=n.map(a=>this.getProductsBySupplier(a.slug));return S(r).pipe(c(a=>a.flat()))}))}getProductsBySupplier(e){let r=this.languageService.getCurrentLanguage()==="en";return this.http.get("assets/catalog/__metadata__.json").pipe(h(()=>l({suppliers:{}})),L(a=>{let i=a.suppliers?.[e];if(!i||!i.files)return l([]);let u=i.files.map(d=>this.http.get(`assets/catalog/${e}/${d}`).pipe(h(()=>l([]))));return u.length===0?l([]):S(u).pipe(c(d=>{let m=[],b=1;return d.forEach(q=>{q.forEach(o=>{m.push({id:b++,name:r?o.item_name||o.item_name_es:o.item_name_es||o.item_name,slug:this.slugify(o.item_name||o.item_name_es),short_description:r?o.description||o.category||"":o.description_es||o.category_es||o.category||"",description:r?o.description||"":o.description_es||"",specifications:{},image:this.transformImagePath(o.image_path),gallery:(o.gallery||[]).map(N=>this.transformImagePath(N)),is_featured:!1,order:b,supplier_name:e,category_name:r?o.category:o.category_es||o.category})})}),m}))}))}transformImagePath(e){return e?e.startsWith("images/")?`assets/images/products/${e.substring(7)}`:e:""}slugify(e){return e.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").trim()}getFeaturedProducts(){return this.getProducts().pipe(c(e=>e.slice(0,6)),h(()=>l([])))}getProductBySlug(e){return this.getProducts().pipe(c(n=>n.find(r=>r.slug===e)||n[0]))}getSupplierCategories(e){return this.http.get(`assets/catalog/${e}/__metadata__.json`).pipe(h(()=>l({categories:[]})),c(n=>!n||!n.categories?[]:n.categories))}getProductsByCategory(e,n){let a=this.languageService.getCurrentLanguage()==="en";return this.http.get(`assets/catalog/${e}/__metadata__.json`).pipe(h(()=>l({categories:[]})),L(i=>{if(!i||!i.categories)return l({products:[],categoryName:n});let u=i.categories.find(m=>m.file.replace(".json","").toLowerCase().replace(/\s+/g,"-")===n);if(!u)return l({products:[],categoryName:n});let d=a?u.name_en:u.name_es;return this.http.get(`assets/catalog/${e}/${u.file}`).pipe(h(()=>l([])),c(m=>{let b=1;return{products:m.map(o=>({id:b++,name:a?o.item_name||o.item_name_es:o.item_name_es||o.item_name,slug:this.slugify(o.item_name||o.item_name_es),short_description:a?o.description||o.category||"":o.description_es||o.category_es||o.category||"",description:a?o.description||"":o.description_es||"",specifications:{},image:this.transformImagePath(o.image_path),gallery:(o.gallery||[]).map(N=>this.transformImagePath(N)),is_featured:!1,order:b,supplier_name:e,category_name:d})),categoryName:d}}))}))}sendContactMessage(e){return this.http.post(`${this.apiUrl}/contact/`,e)}getCompanyInfo(){return this.http.get(this.withLang(`${this.apiUrl}/company/`)).pipe(h(()=>l(this.getDefaultCompanyInfo())))}getCategoriesBySupplierSlug(e,n="esp"){let r=new XMLHttpRequest;if(r.open("GET","assets/catalog/__metadata__.json",!1),r.send(null),r.status===200)try{let i=JSON.parse(r.responseText).suppliers?.[e];if(i&&i.available_categories&&i.available_categories[n])return i.available_categories[n]}catch{return[]}return[]}getDefaultCompanyInfo(){let n=this.languageService.getCurrentLanguage()==="en";return{name:"Metplastech Technologies SPA",slogan:n?"Innovation and technology for industry":"Innovaci\xF3n y tecnolog\xEDa para la industria",phone:"+569 9615 4315",whatsapp:"+56996154315",email:"contacto@metplastech.cl",address:n?"Curic\xF3 \u2013 Maule Region \u2013 Chile":"Curic\xF3 \u2013 Regi\xF3n del Maule \u2013 Chile"}}static{this.\u0275fac=function(n){return new(n||t)(R(ee))}}static{this.\u0275prov=g({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();export{_ as a,D as b,Ie as c,Pe as d,se as e,Ke as f};
