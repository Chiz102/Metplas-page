import{A as w,H as K,Ia as X,J as L,O as u,Ob as Q,P as J,R as G,T as E,U as c,Y as W,_ as z,a as m,b as H,h as x,ja as M,l as o,n as b,p as h,t as V,u as N,v as S,x as d,y as U,yb as Z}from"./chunk-BGYWR2DB.js";var I=class{},se=(()=>{class t{handle(e){return e.key}static \u0275fac=function(n){return new(n||t)};static \u0275prov=u({token:t,factory:t.\u0275fac})}return t})(),v=class{},ie=(()=>{class t extends v{compile(e,n){return e}compileTranslations(e,n){return e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=M(t)))(r||t)}})();static \u0275prov=u({token:t,factory:t.\u0275fac})}return t})(),T=class{},oe=(()=>{class t extends T{getTranslation(e){return o({})}static \u0275fac=(()=>{let e;return function(r){return(e||(e=M(t)))(r||t)}})();static \u0275prov=u({token:t,factory:t.\u0275fac})}return t})();function A(t,s){if(t===s)return!0;if(t===null||s===null)return!1;if(t!==t&&s!==s)return!0;let e=typeof t,n=typeof s,r;if(e==n&&e=="object")if(Array.isArray(t)){if(!Array.isArray(s))return!1;if((r=t.length)==s.length){for(let a=0;a<r;a++)if(!A(t[a],s[a]))return!1;return!0}}else{if(Array.isArray(s))return!1;if(f(t)&&f(s)){let a=Object.create(null);for(let i in t){if(!A(t[i],s[i]))return!1;a[i]=!0}for(let i in s)if(!(i in a)&&typeof s[i]<"u")return!1;return!0}}return!1}function p(t){return typeof t<"u"&&t!==null}function Y(t){return t!==void 0}function f(t){return _(t)&&!C(t)&&t!==null}function _(t){return typeof t=="object"&&t!==null}function C(t){return Array.isArray(t)}function R(t){return typeof t=="string"}function le(t){return typeof t=="function"}function O(t){if(C(t))return t.map(s=>O(s));if(f(t)){let s={};return Object.keys(t).forEach(e=>{s[e]=O(t[e])}),s}else return t}function $(t,s){if(!_(t))return O(s);let e=O(t);return _(e)&&_(s)&&Object.keys(s).forEach(n=>{f(s[n])?n in t?e[n]=$(t[n],s[n]):Object.assign(e,{[n]:s[n]}):Object.assign(e,{[n]:s[n]})}),e}function ne(t,s){let e=s.split(".");s="";do{s+=e.shift();let n=!e.length;if(p(t)){if(f(t)&&Y(t[s])&&(f(t[s])||C(t[s])||n)){t=t[s],s="";continue}if(C(t)){let r=parseInt(s,10);if(Y(t[r])&&(f(t[r])||C(t[r])||n)){t=t[r],s="";continue}}}if(n){t=void 0;continue}s+="."}while(e.length);return t}function ue(t,s,e){return $(t,ce(s,e))}function ce(t,s){return t.split(".").reduceRight((e,n)=>({[n]:e}),s)}var F=class{},ge=(()=>{class t extends F{templateMatcher=/{{\s?([^{}\s]*)\s?}}/g;interpolate(e,n){if(R(e))return this.interpolateString(e,n);if(le(e))return this.interpolateFunction(e,n)}interpolateFunction(e,n){return e(n)}interpolateString(e,n){return n?e.replace(this.templateMatcher,(r,a)=>{let i=this.getInterpolationReplacement(n,a);return i!==void 0?i:r}):e}getInterpolationReplacement(e,n){return this.formatValue(ne(e,n))}formatValue(e){if(R(e))return e;if(typeof e=="number"||typeof e=="boolean")return e.toString();if(e===null)return"null";if(C(e))return e.join(", ");if(_(e))return typeof e.toString=="function"&&e.toString!==Object.prototype.toString?e.toString():JSON.stringify(e)}static \u0275fac=(()=>{let e;return function(r){return(e||(e=M(t)))(r||t)}})();static \u0275prov=u({token:t,factory:t.\u0275fac})}return t})(),B=(()=>{class t{_onTranslationChange=new x;_onLangChange=new x;_onFallbackLangChange=new x;fallbackLang=null;currentLang;translations={};languages=[];getTranslations(e){return this.translations[e]}setTranslations(e,n,r){this.translations[e]=r&&this.hasTranslationFor(e)?$(this.translations[e],n):n,this.addLanguages([e]),this._onTranslationChange.next({lang:e,translations:this.getTranslations(e)})}getLanguages(){return this.languages}getCurrentLang(){return this.currentLang}getFallbackLang(){return this.fallbackLang}setFallbackLang(e,n=!0){this.fallbackLang=e,n&&this._onFallbackLangChange.next({lang:e,translations:this.translations[e]})}setCurrentLang(e,n=!0){this.currentLang=e,n&&this._onLangChange.next({lang:e,translations:this.translations[e]})}get onTranslationChange(){return this._onTranslationChange.asObservable()}get onLangChange(){return this._onLangChange.asObservable()}get onFallbackLangChange(){return this._onFallbackLangChange.asObservable()}addLanguages(e){this.languages=Array.from(new Set([...this.languages,...e]))}hasTranslationFor(e){return typeof this.translations[e]<"u"}deleteTranslations(e){delete this.translations[e]}getTranslation(e){let n=this.getValue(this.currentLang,e);return n===void 0&&this.fallbackLang!=null&&this.fallbackLang!==this.currentLang&&(n=this.getValue(this.fallbackLang,e)),n}getValue(e,n){return ne(this.getTranslations(e),n)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=u({token:t,factory:t.\u0275fac})}return t})(),q=new G("TRANSLATE_CONFIG"),k=t=>b(t)?t:o(t);var j=(()=>{class t{loadingTranslations;pending=!1;_translationRequests={};lastUseLanguage=null;currentLoader=c(T);compiler=c(v);parser=c(F);missingTranslationHandler=c(I);store=c(B);extend=!1;get onTranslationChange(){return this.store.onTranslationChange}get onLangChange(){return this.store.onLangChange}get onFallbackLangChange(){return this.store.onFallbackLangChange}get onDefaultLangChange(){return this.store.onFallbackLangChange}constructor(){let e=m({extend:!1,fallbackLang:null},c(q,{optional:!0}));e.lang&&this.use(e.lang),e.fallbackLang&&this.setFallbackLang(e.fallbackLang),e.extend&&(this.extend=!0)}setFallbackLang(e){this.getFallbackLang()||this.store.setFallbackLang(e,!1);let n=this.loadOrExtendLanguage(e);return b(n)?(n.pipe(w(1)).subscribe({next:()=>{this.store.setFallbackLang(e)},error:()=>{}}),n):(this.store.setFallbackLang(e),o(this.store.getTranslations(e)))}use(e){this.lastUseLanguage=e,this.getCurrentLang()||this.store.setCurrentLang(e,!1);let n=this.loadOrExtendLanguage(e);return b(n)?(n.pipe(w(1)).subscribe({next:()=>{this.changeLang(e)},error:()=>{}}),n):(this.changeLang(e),o(this.store.getTranslations(e)))}loadOrExtendLanguage(e){if(!this.store.hasTranslationFor(e)||this.extend)return this._translationRequests[e]=this._translationRequests[e]||this.loadAndCompileTranslations(e),this._translationRequests[e]}changeLang(e){e===this.lastUseLanguage&&this.store.setCurrentLang(e)}getCurrentLang(){return this.store.getCurrentLang()}loadAndCompileTranslations(e){this.pending=!0;let n=this.currentLoader.getTranslation(e).pipe(K(1),w(1));return this.loadingTranslations=n.pipe(h(r=>this.compiler.compileTranslations(r,e)),K(1),w(1)),this.loadingTranslations.subscribe({next:r=>{this.store.setTranslations(e,r,this.extend),this.pending=!1},error:r=>{this.pending=!1}}),n}setTranslation(e,n,r=!1){let a=this.compiler.compileTranslations(n,e);this.store.setTranslations(e,a,r||this.extend)}getLangs(){return this.store.getLanguages()}addLangs(e){this.store.addLanguages(e)}getParsedResultForKey(e,n){let r=this.getTextToInterpolate(e);if(p(r))return this.runInterpolation(r,n);let a=this.missingTranslationHandler.handle(m({key:e,translateService:this},n!==void 0&&{interpolateParams:n}));return a!==void 0?a:e}getFallbackLang(){return this.store.getFallbackLang()}getTextToInterpolate(e){return this.store.getTranslation(e)}runInterpolation(e,n){if(p(e))return C(e)?this.runInterpolationOnArray(e,n):f(e)?this.runInterpolationOnDict(e,n):this.parser.interpolate(e,n)}runInterpolationOnArray(e,n){return e.map(r=>this.runInterpolation(r,n))}runInterpolationOnDict(e,n){let r={};for(let a in e){let i=this.runInterpolation(e[a],n);i!==void 0&&(r[a]=i)}return r}getParsedResult(e,n){return e instanceof Array?this.getParsedResultForArray(e,n):this.getParsedResultForKey(e,n)}getParsedResultForArray(e,n){let r={},a=!1;for(let g of e)r[g]=this.getParsedResultForKey(g,n),a=a||b(r[g]);if(!a)return r;let i=e.map(g=>k(r[g]));return S(i).pipe(h(g=>{let y={};return g.forEach((P,D)=>{y[e[D]]=P}),y}))}get(e,n){if(!p(e)||!e.length)throw new Error('Parameter "key" is required and cannot be empty');return this.pending?this.loadingTranslations.pipe(U(()=>k(this.getParsedResult(e,n)))):k(this.getParsedResult(e,n))}getStreamOnTranslationChange(e,n){if(!p(e)||!e.length)throw new Error('Parameter "key" is required and cannot be empty');return V(N(()=>this.get(e,n)),this.onTranslationChange.pipe(L(()=>{let r=this.getParsedResult(e,n);return k(r)})))}stream(e,n){if(!p(e)||!e.length)throw new Error('Parameter "key" required');return V(N(()=>this.get(e,n)),this.onLangChange.pipe(L(()=>{let r=this.getParsedResult(e,n);return k(r)})))}instant(e,n){if(!p(e)||e.length===0)throw new Error('Parameter "key" is required and cannot be empty');let r=this.getParsedResult(e,n);return b(r)?Array.isArray(e)?e.reduce((a,i)=>(a[i]=i,a),{}):e:r}set(e,n,r=this.getCurrentLang()){this.store.setTranslations(r,ue(this.store.getTranslations(r),e,R(n)?this.compiler.compile(n,r):this.compiler.compileTranslations(n,r)),!1)}reloadLang(e){return this.resetLang(e),this.loadAndCompileTranslations(e)}resetLang(e){delete this._translationRequests[e],this.store.deleteTranslations(e)}static getBrowserLang(){if(typeof window>"u"||!window.navigator)return;let e=this.getBrowserCultureLang();return e?e.split(/[-_]/)[0]:void 0}static getBrowserCultureLang(){if(!(typeof window>"u"||typeof window.navigator>"u"))return window.navigator.languages?window.navigator.languages[0]:window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage}getBrowserLang(){return t.getBrowserLang()}getBrowserCultureLang(){return t.getBrowserCultureLang()}get defaultLang(){return this.getFallbackLang()}get currentLang(){return this.store.getCurrentLang()}get langs(){return this.store.getLanguages()}setDefaultLang(e){return this.setFallbackLang(e)}getDefaultLang(){return this.getFallbackLang()}static \u0275fac=function(n){return new(n||t)};static \u0275prov=u({token:t,factory:t.\u0275fac})}return t})();var _e=(()=>{class t{translate=c(j);_ref=c(Z);value="";lastKey=null;lastParams=[];onTranslationChange;onLangChange;onFallbackLangChange;updateValue(e,n,r){let a=i=>{this.value=i!==void 0?i:e,this.lastKey=e,this._ref.markForCheck()};if(r){let i=this.translate.getParsedResult(e,n);b(i)?i.subscribe(a):a(i)}this.translate.get(e,n).subscribe(a)}transform(e,...n){if(!e||!e.length)return e;if(A(e,this.lastKey)&&A(n,this.lastParams))return this.value;let r;if(p(n[0])&&n.length)if(R(n[0])&&n[0].length){let a=n[0].replace(/(')?([a-zA-Z0-9_]+)(')?(\s)?:/g,'"$2":').replace(/:(\s)?(')(.*?)(')/g,':"$3"');try{r=JSON.parse(a)}catch(i){throw new SyntaxError(`Wrong parameter in TranslatePipe. Expected a valid Object, received: ${n[0]}`)}}else f(n[0])&&(r=n[0]);return this.lastKey=e,this.lastParams=n,this.updateValue(e,r),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(a=>{(this.lastKey&&a.lang===this.translate.getCurrentLang()||a.lang===this.translate.getFallbackLang())&&(this.lastKey=null,this.updateValue(e,r,a.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(a=>{this.lastKey&&(this.lastKey=null,this.updateValue(e,r,a.translations))})),this.onFallbackLangChange||(this.onFallbackLangChange=this.translate.onFallbackLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(e,r))})),this.value}_dispose(){typeof this.onTranslationChange<"u"&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),typeof this.onLangChange<"u"&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),typeof this.onFallbackLangChange<"u"&&(this.onFallbackLangChange.unsubscribe(),this.onFallbackLangChange=void 0)}ngOnDestroy(){this._dispose()}static \u0275fac=function(n){return new(n||t)};static \u0275pipe=z({name:"translate",type:t,pure:!1,standalone:!0});static \u0275prov=u({token:t,factory:t.\u0275fac})}return t})();function he(t){return{provide:T,useClass:t}}function fe(t){return{provide:v,useClass:t}}function de(t){return{provide:F,useClass:t}}function pe(t){return{provide:I,useClass:t}}function ee(t={},s){let e=[];t.loader&&e.push(t.loader),t.compiler&&e.push(t.compiler),t.parser&&e.push(t.parser),t.missingTranslationHandler&&e.push(t.missingTranslationHandler),s&&e.push(B),(t.useDefaultLang||t.defaultLanguage)&&(console.warn("The `useDefaultLang` and `defaultLanguage` options are deprecated. Please use `fallbackLang` instead."),t.useDefaultLang===!0&&t.defaultLanguage&&(t.fallbackLang=t.defaultLanguage));let n={fallbackLang:t.fallbackLang??null,lang:t.lang,extend:t.extend??!1};return e.push({provide:q,useValue:n}),e.push({provide:j,useClass:j,deps:[B,T,v,F,I,q]}),e}var Ie=(()=>{class t{static forRoot(e={}){return{ngModule:t,providers:[...ee(m({compiler:fe(ie),parser:de(ge),loader:he(oe),missingTranslationHandler:pe(se)},e),!0)]}}static forChild(e={}){return{ngModule:t,providers:[...ee(e,e.isolate??!1)]}}static \u0275fac=function(n){return new(n||t)};static \u0275mod=W({type:t});static \u0275inj=J({})}return t})();var re=(()=>{class t{constructor(e){this.translate=e,this.currentLanguage=X("es");let n=localStorage.getItem("language"),r=n==="es"||n==="en"?n:"es";this.setLanguage(r)}setLanguage(e){this.translate.use(e),this.currentLanguage.set(e),localStorage.setItem("language",e)}getCurrentLanguage(){return this.currentLanguage()}static{this.\u0275fac=function(n){return new(n||t)(E(j))}}static{this.\u0275prov=u({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Ne=(()=>{class t{constructor(e){this.http=e,this.apiUrl="http://localhost:8000/api",this.languageService=c(re)}withLang(e){let n=this.languageService.getCurrentLanguage(),r=e.includes("?")?"&":"?";return`${e}${r}lang=${n}`}getSuppliers(){return this.http.get("assets/catalog/__metadata__.json").pipe(d(()=>o({suppliers:{}})),h(e=>!e||!e.suppliers?[]:Object.entries(e.suppliers).map(([n,r])=>m({slug:n},r))))}getSupplierBySlug(e){return this.http.get("assets/catalog/__metadata__.json").pipe(d(()=>o({suppliers:{}})),L(n=>{if(!n||!n.suppliers)return o(null);let r=n.suppliers[e];return r?this.getProductsBySupplier(e).pipe(h(a=>H(m({slug:e},r),{products:a,products_count:a.length}))):o(null)}))}getCategories(){return this.http.get(this.withLang(`${this.apiUrl}/categories/`)).pipe(d(()=>o(this.getMockCategories())))}getCategoryBySlug(e){return this.http.get(this.withLang(`${this.apiUrl}/categories/${e}/`))}getProducts(e){return e?this.getProductsBySupplier(e):this.getSuppliers().pipe(L(n=>{if(n.length===0)return o([]);let r=n.map(a=>this.getProductsBySupplier(a.slug));return S(r).pipe(h(a=>a.flat()))}))}getProductsBySupplier(e){let r=this.languageService.getCurrentLanguage()==="en";return this.http.get("assets/catalog/__metadata__.json").pipe(d(()=>o({suppliers:{}})),L(a=>{let i=a.suppliers?.[e];if(!i||!i.files)return o([]);let g=i.files.map(y=>this.http.get(`assets/catalog/${e}/${y}`).pipe(d(()=>o([]))));return g.length===0?o([]):S(g).pipe(h(y=>{let P=[],D=1;return y.forEach(ae=>{ae.forEach(l=>{P.push({id:D++,name:r?l.item_name||l.item_name_es:l.item_name_es||l.item_name,slug:this.slugify(l.item_name||l.item_name_es),short_description:r?l.category||"":l.category_es||l.category||"",description:"",specifications:{},image:this.transformImagePath(l.image_path),gallery:[],is_featured:!1,order:D,supplier_name:e,category_name:r?l.category:l.category_es||l.category})})}),P}))}))}transformImagePath(e){return e?e.startsWith("images/")?`assets/images/products/${e.substring(7)}`:e:""}slugify(e){return e.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").trim()}getFeaturedProducts(){return this.getProducts().pipe(h(e=>e.slice(0,6)),d(()=>o([])))}getProductBySlug(e){return this.getProducts().pipe(h(n=>n.find(r=>r.slug===e)||n[0]))}sendContactMessage(e){return this.http.post(`${this.apiUrl}/contact/`,e)}getCompanyInfo(){return this.http.get(this.withLang(`${this.apiUrl}/company/`)).pipe(d(()=>o(this.getDefaultCompanyInfo())))}getCategoriesBySupplierSlug(e,n="esp"){let r=new XMLHttpRequest;if(r.open("GET","assets/catalog/__metadata__.json",!1),r.send(null),r.status===200)try{let i=JSON.parse(r.responseText).suppliers?.[e];if(i&&i.available_categories&&i.available_categories[n])return i.available_categories[n]}catch{return[]}return[]}getMockSuppliers(){let n=this.languageService.getCurrentLanguage()==="en";return[{id:1,name:"Jarvis",slug:"jarvis",description:n?"Leading supplier of high-precision industrial equipment.":"Proveedor l\xEDder en equipos industriales de alta precisi\xF3n.",country:n?"Germany":"Alemania",icon:"precision_manufacturing",color:"#1565c0",products_count:5},{id:2,name:"Freund",slug:"freund",description:n?"Specialists in industrial cutlery and cutting tools.":"Especialistas en cuchiller\xEDa industrial y herramientas de corte.",country:n?"Germany":"Alemania",icon:"content_cut",color:"#d32f2f",products_count:8},{id:3,name:"Dick",slug:"dick",description:n?"Premium manufacturer of professional knives and tools.":"Fabricante premium de cuchillos y herramientas profesionales.",country:n?"Germany":"Alemania",icon:"hardware",color:"#2e7d32",products_count:12},{id:4,name:"Proveedor Ejemplo",slug:"proveedor-ejemplo",description:n?"Example supplier description.":"Descripci\xF3n del proveedor ejemplo.",country:"Chile",icon:"business",color:"#7b1fa2",products_count:3}]}getMockCategories(){let n=this.languageService.getCurrentLanguage()==="en";return[{id:1,name:n?"Equipment":"Equipos",slug:"equipos",category_type:"equipos",description:n?"High-precision equipment for industry":"Equipos de alta precisi\xF3n para la industria",icon:"precision_manufacturing",products_count:10},{id:2,name:n?"Supplies":"Insumos",slug:"insumos",category_type:"insumos",description:n?"First-quality industrial supplies":"Insumos industriales de primera calidad",icon:"inventory_2",products_count:15}]}getDefaultCompanyInfo(){let n=this.languageService.getCurrentLanguage()==="en";return{name:"Metplastech Technologies SPA",slogan:n?"Innovation and technology for industry":"Innovaci\xF3n y tecnolog\xEDa para la industria",phone:"+569 9615 4315",whatsapp:"+56996154315",email:"contacto@metplastech.cl",address:n?"Curic\xF3 \u2013 Maule Region \u2013 Chile":"Curic\xF3 \u2013 Regi\xF3n del Maule \u2013 Chile"}}static{this.\u0275fac=function(n){return new(n||t)(E(Q))}}static{this.\u0275prov=u({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();export{T as a,j as b,_e as c,Ie as d,re as e,Ne as f};
